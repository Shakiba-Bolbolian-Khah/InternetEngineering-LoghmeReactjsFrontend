{"version":3,"sources":["media/Pics/LOGO.png","components/Spinner.js","components/Footer.js","containers/InfoBar.js","containers/Authentication.js","containers/Profile.js","containers/Cart.js","components/Header.js","containers/HomeContainers/FoodParty.js","containers/Restaurant.js","containers/HomeContainers/HomeRestaurants.js","containers/HomeContainers/Home.js","index.js"],"names":["module","exports","override","css","Spinner","className","size","color","loading","Footer","String","prototype","toPersianDigits","id","this","replace","w","InfoBar","props","type","value","phoneNumber","email","credit","firstName","lastName","React","Component","defaultProps","Authentication","prepareLoginButton","auth2","attachClickHandler","refs","googleLoginBtn","googleUser","params","getBasicProfile","getEmail","queryString","Object","keys","map","key","join","requestOptions","method","headers","length","body","fetch","then","response","statusCode","status","data","json","Promise","all","stat","token","JSON","parse","localStorage","setItem","JWT","expDate","ReactDOM","render","document","getElementById","toast","error","setTimeout","catch","alert","stringify","undefined","handleFirstName","bind","handleLastName","handlePhone","handleEmail","handlePassword","handleRePass","handleSubmit","handleAnother","signup","login","googleSDK","state","phone","pass","rePass","clicked","classList","remove","elem","parentElement","removeChild","event","persist","setState","prevState","target","preventDefault","anotherPage","hasError","test","reset","success","window","load","init","client_id","cookiepolicy","scope","d","s","js","fjs","getElementsByTagName","createElement","src","parentNode","insertBefore","onSubmit","autoClose","name","placeholder","onChange","required","add","signupInput","loginInput","ref","href","onClick","Profile","createFactorTable","factorTable","items","i","push","showFactorElement","element","number","createTable","orderTable","orders","user","showOrder","order","fetchUser","handleClick","showSelectBar","showInfoBox","handleChange","handleSubmitCredit","handleFactor","renderFactor","showFactor","showFactorElements","hideFactor","showOrders","ready","newCredit","readyBox","now","Date","getItem","getTime","removeItem","timerId","setInterval","addEventListener","jwtStr","Headers","updatedUser","console","log","page","e","parseInt","modalWindow","modal","content","style","display","foodName","price","factor","totalPayment","restaurantName","isNaN","orderState","substring","clearInterval","Cart","createCart","cartTable","cart","showAddedFood","index","fetchCart","showCart","addFood","deleteFood","isEmpty","newCart","buttonReady","toastId","warn","ok","dismiss","item","restaurantId","partyFood","Header","handleCart","renderCart","hideCart","unmountComponentAtNode","logout","goProfile","goHome","require","alt","FoodParty","fetchParty","remainingTime","showPartyFoods","showPartyFood","handleModal","showPartyFoodBuyModal","hidePartyFoodBuyModal","increaseOrderCount","decreaseOrderCount","renderModal","partyFoods","date","orderCount","timer","timerTime","updatedParty","enteredDate","year","monthValue","dayOfMonth","hour","minute","second","foods","newCount","count","image","popularity","description","oldPrice","min","sec","remainedTime","Math","floor","Restaurant","createRestaurantMenu","rowsNum","menuTable","children","j","showFood","food","fetchRestaurant","showFoods","showFoodModal","hideFoodModal","restaurant","newRestaurant","newFoods","menu","logo","HomeRestaurants","createRestaurantsMenu","restaurants","restaurantsTable","showRestaurant","fetchRestaurants","serachRestaurants","showRestaurants","updatedRestaurants","foodQuery","restaurantQuery","prevProps","Home","searchBar","handleSearch","handleFoodChange","handleRestaurantChange","foodValue","resValue"],"mappings":"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","file":"static/js/main.575acaed.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/LOGO.baa7a276.png\";","import React from 'react';\r\nimport { css } from \"@emotion/core\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nconst override = css`\r\n  display: block;\r\n  margin: 0 auto;\r\n  border-color: red;\r\n  align-self: center;\r\n`;\r\n\r\nfunction Spinner(){\r\n    return(\r\n        <div className=\"sweet-loading\">\r\n            <ClipLoader\r\n                css={override}\r\n                size={50}\r\n                color={\"#123abc\"}\r\n                loading= {true}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Spinner;","import React from 'react';\r\nimport '../CSS/Normalize.css';\r\nimport '../CSS/basicStyles.css';\r\nimport '../CSS/footerStyles.css';\r\n\r\nfunction Footer(){\r\n    return (\r\n        <div className=\"footer\">\r\n            &copy; تمامی حقوق متعلق به لقمه است.\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport '../CSS/Normalize.css';\r\nimport '../CSS/basicStyles.css';\r\nimport '../CSS/infoBarStyles.css';\r\nimport '../CSS/profileStyles.css';\r\nimport '../media/FlatIcon/font/flaticon.css';\r\n\r\nString.prototype.toPersianDigits= function(){\r\n    var id = ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];\r\n    return this.replace(/[0-9]/g, function(w){\r\n        return id[+w]\r\n    });\r\n}\r\n\r\nclass InfoBar extends React.Component {\r\n    render(){\r\n        if(this.props.type === \"profile\"){\r\n            return(\r\n                <div className=\"row infoBar\">\r\n                    <div className=\"infoBarUserDetails\">\r\n                        <div className=\"infoBarDetailData\">\r\n                            <i className=\"flaticon-loghme-phone\"></i>\r\n                            <div>{this.props.value.phoneNumber.toPersianDigits()}</div>\r\n                        </div>\r\n                        <div className =\"infoBarDetailData\">\r\n                            <i className=\"flaticon-loghme-mail\"></i>\r\n                            <div>{this.props.value.email}</div>\r\n                        </div>\r\n                        <div className=\"infoBarDetailData\">\r\n                            <i className=\"flaticon-loghme-card\"></i>\r\n                            <div>{String(this.props.value.credit).toPersianDigits()} تومان</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"infoBarUsername\">\r\n                        <i className=\"flaticon-loghme-account\"></i>\r\n                        <div>{this.props.value.firstName} {this.props.value.lastName}</div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        else if(this.props.type === \"restaurant\"){\r\n            return(\r\n                <div className=\"row infoBar\"></div>\r\n            )\r\n        }\r\n        else if(this.props.type === \"home\") {\r\n            return(\r\n                <div className=\"row searchBarBg\">\r\n                    <div className=\"searchBarEffect\">\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nInfoBar.propTypes = {\r\n    type: PropTypes.string,\r\n};\r\n\r\nInfoBar.defaultProps = {\r\n    type: 'home'\r\n}\r\nexport default InfoBar;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport '../CSS/Normalize.css';\r\nimport '../CSS/basicStyles.css';\r\nimport '../CSS/authenticationStyles.css';\r\nimport '../media/FlatIcon/font-signup/flaticon.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Footer from \"../components/Footer\"\r\nimport Home from \"./HomeContainers/Home\"\r\n\r\nclass Authentication extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.handleFirstName = this.handleFirstName.bind(this);\r\n        this.handleLastName = this.handleLastName.bind(this);\r\n        this.handlePhone = this.handlePhone.bind(this);\r\n        this.handleEmail = this.handleEmail.bind(this);\r\n        this.handlePassword = this.handlePassword.bind(this);\r\n        this.handleRePass = this.handleRePass.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleAnother = this.handleAnother.bind(this);\r\n        this.signup = this.signup.bind(this);\r\n        this.login = this.login.bind(this);\r\n        this.googleSDK = this.googleSDK.bind(this);\r\n        this.prepareLoginButton = this.prepareLoginButton.bind(this);\r\n        this.state = {\r\n            firstName : \"\",\r\n            lastName : \"\",\r\n            phone : \"\",\r\n            email : \"\",\r\n            pass : \"\",\r\n            rePass : \"\",\r\n            clicked : false,\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.googleSDK();\r\n    }\r\n    componentWillUnmount(){\r\n        document.body.classList.remove('authenticationBody');\r\n        var elem = document.getElementById(\"google-jssdk\");\r\n        elem.parentElement.removeChild(elem);\r\n    }\r\n    handleFirstName(event) {\r\n        event.persist();\r\n        this.setState(prevState => ({firstName: event.target.value}));\r\n    }\r\n    handleLastName(event, type){\r\n        event.persist();\r\n        this.setState(prevState => ({lastName: event.target.value}));\r\n    }\r\n    handleEmail(event) {\r\n        event.persist();\r\n        this.setState(prevState => ({email: event.target.value}));\r\n    }\r\n    handlePhone(event) {\r\n        event.persist();\r\n        this.setState(prevState => ({phone: event.target.value}));\r\n    }\r\n    handlePassword(event) {\r\n        event.persist();\r\n        this.setState(prevState => ({pass: event.target.value}));\r\n    }\r\n    handleRePass(event) {\r\n        event.persist();\r\n        this.setState(prevState => ({rePass: event.target.value}));\r\n    }\r\n    handleAnother(event) {\r\n        event.preventDefault();\r\n        var anotherPage = this.props.type === 'signup' ? 'login' : 'signup';\r\n        ReactDOM.render(<Authentication type = {anotherPage}/>, document.getElementById(\"root\"));\r\n    }\r\n    handleSubmit(event) {\r\n        this.setState(prevState => ({clicked: true}));\r\n        var hasError = false\r\n        event.preventDefault();\r\n        let emailRe = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        if(!emailRe.test(this.state.email)) {\r\n            toast.error(\"Invalid email format\");\r\n            hasError = true\r\n        }\r\n        if(this.props.type === 'signup'){\r\n            let phoneRe = /09[0-9]{9}/;\r\n            if(!phoneRe.test(this.state.phone)){\r\n                toast.error(\"Invalid phone number\");\r\n                hasError = true\r\n            }\r\n            if(this.state.pass !== this.state.rePass){\r\n                toast.error(\"Passwords are not same\");\r\n                hasError = true\r\n            }\r\n            if(this.state.firstName.length < 3 || this.state.lastName.length < 3){\r\n                toast.error(\"First name or last name is not valid\");\r\n                hasError = true\r\n            }\r\n        }\r\n        if(!hasError){\r\n            document.getElementById(\"authForm\").reset()\r\n            if(this.props.type === 'signup'){\r\n                this.signup();\r\n            }\r\n            else if(this.props.type === 'login'){\r\n                this.login();\r\n            }\r\n        }\r\n        this.setState(prevState => ({clicked: false}));\r\n    }\r\n\r\n    signup() {\r\n        var params = {\r\n            \"firstName\": this.state.firstName,\r\n            \"lastName\": this.state.lastName,\r\n            \"phone\": this.state.phone,\r\n            \"email\": this.state.email,\r\n            \"password\": this.state.pass,\r\n        };\r\n        var queryString = Object.keys(params).map(function(key) {\r\n            return key + '=' + params[key]\r\n        }).join('&');\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: {\r\n                'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n            },\r\n            body: queryString\r\n        };\r\n        fetch('http://ie.etuts.ir:31807/Loghme/authentication/signup', requestOptions)\r\n        .then(response => {\r\n            const statusCode = response.status;\r\n            const data = response.json();\r\n            return Promise.all([statusCode, data]);\r\n        })\r\n        .then(([stat, data]) => {\r\n            if(stat===200){\r\n                toast.success(\"Your sign up completed successfully!\")\r\n                var token = JSON.parse(data)\r\n                localStorage.setItem(\"JWT\", token.JWT)\r\n                localStorage.setItem(\"expDate\", token.expDate)\r\n                ReactDOM.render(<Home type={\"normal\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            if(stat===403){\r\n                toast.error(\"There is already an account with this E-mail address!\")\r\n                document.getElementById(\"authForm\").reset()\r\n            }\r\n        })\r\n        .catch(() =>{\r\n            toast.error(\"You can not sign up right now!\")\r\n        })\r\n    }\r\n    \r\n    login() {\r\n        var params = {\r\n            \"email\": this.state.email,\r\n            \"password\": this.state.pass,\r\n        };\r\n        var queryString = Object.keys(params).map(function(key) {\r\n            return key + '=' + params[key]\r\n        }).join('&');\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { \r\n                'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n            },\r\n            body: queryString\r\n        };\r\n        fetch('http://ie.etuts.ir:31807/Loghme/authentication/login', requestOptions)\r\n        .then(response => {\r\n            const statusCode = response.status;\r\n            const data = response.json();\r\n            return Promise.all([statusCode, data]);\r\n        })\r\n        .then(([stat, data]) => {\r\n            if(stat===200){\r\n                var token = JSON.parse(data)\r\n                localStorage.setItem(\"JWT\", token.JWT)\r\n                localStorage.setItem(\"expDate\", token.expDate)\r\n                ReactDOM.render(<Home type={\"normal\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            if(stat===403){\r\n                toast.error(\"Wrong password or username!\")\r\n                document.getElementById(\"authForm\").reset()\r\n            }\r\n        })\r\n        .catch(() =>{\r\n            toast.error(\"You can not login right now!\")\r\n        })\r\n    }\r\n\r\n    prepareLoginButton = () => {         \r\n        this.auth2.attachClickHandler(this.refs.googleLoginBtn, {},\r\n            (googleUser) => {\r\n            let profile = googleUser.getBasicProfile();\r\n            var params = {\r\n                \"email\": profile.getEmail(),\r\n            };\r\n            var queryString = Object.keys(params).map(function(key) {\r\n                return key + '=' + params[key]\r\n            }).join('&');\r\n            const requestOptions = {\r\n                method: 'POST',\r\n                headers: { \r\n                    'content-length' : queryString.length,\r\n                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n                },\r\n                body: queryString\r\n            };\r\n            fetch('http://ie.etuts.ir:31807/Loghme/authentication/googleLogin', requestOptions)\r\n            .then(response => {\r\n                const statusCode = response.status;\r\n                const data = response.json();\r\n                return Promise.all([statusCode, data]);\r\n            })\r\n            .then(([stat, data]) => {\r\n                if(stat===200){\r\n                    var token = JSON.parse(data)\r\n                    localStorage.setItem(\"JWT\", token.JWT)\r\n                    localStorage.setItem(\"expDate\", token.expDate)\r\n                    ReactDOM.render(<Home type={\"normal\"}/>, document.getElementById(\"root\"));\r\n                }\r\n                if(stat===403){\r\n                    toast.error(\"You shoud sign up first!\")\r\n                    setTimeout(() =>{\r\n                        ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n                    },3000);\r\n                }\r\n            })\r\n            .catch(() =>{\r\n                toast.error(\"You can not login right now!\")\r\n            })\r\n            }, (error) => {\r\n            alert(JSON.stringify(error, undefined, 2));\r\n        });\r\n    }\r\n    googleSDK() {\r\n        window['googleSDKLoaded'] = () => {\r\n          window['gapi'].load('auth2', () => {\r\n            this.auth2 = window['gapi'].auth2.init({\r\n              client_id: '385252994096-hh2hgodtto8qhd0jct982i4mktomdu4s.apps.googleusercontent.com',\r\n              cookiepolicy: 'single_host_origin',\r\n              scope: 'profile email'\r\n            });\r\n            this.prepareLoginButton();\r\n          });\r\n        }\r\n       \r\n        (function(d, s, id){\r\n          var js, fjs = d.getElementsByTagName(\"link\")[0];\r\n          if (d.getElementById(id)) {return;}\r\n          js = d.createElement(s); js.id = id;\r\n          js.src = \"https://apis.google.com/js/platform.js?onload=googleSDKLoaded\";\r\n          fjs.parentNode.insertBefore(js, fjs);\r\n        }(document, 'script', 'google-jssdk'));\r\n    }\r\n    \r\n    signupInput(){\r\n        return(\r\n            <form id=\"authForm\" onSubmit={this.handleSubmit}>\r\n                <div className=\"topBox\">\r\n                    <ToastContainer autoClose={6000}/>\r\n                    <input className =\"inputBox\" type=\"text\" name=\"firstName\" placeholder=\"نام\" onChange={this.handleFirstName} required/>\r\n                    <input className =\"inputBox\" type=\"text\" name=\"lastName\" placeholder=\"نام خانوادگی\" onChange={this.handleLastName} required/>\r\n                    <input className =\"inputBox\" type=\"text\" name=\"phoneNumber\" placeholder=\"شماره تلفن\" onChange={this.handlePhone} required/>\r\n                    <input className =\"inputBox\" type=\"text\" name=\"email\" placeholder=\"ایمیل\" onChange={this.handleEmail} required/>\r\n                    <input className =\"inputBox\" type=\"password\" name=\"password\" placeholder=\"رمز عبور\" onChange={this.handlePassword} required/>\r\n                    <input className =\"inputBox\" type=\"password\" name=\"passwordConf\" placeholder=\"تکرار رمز عبور\" onChange={this.handleRePass} required/>\r\n                    {this.state.clicked ? ( \r\n                        <button className =\"inputBox\" type=\"submit\" >\r\n                            <span className=\"spinner-grow spinner-grow-sm\"></span>\r\n                            ...منتظر بمانید\r\n                        </button>\r\n                    ):(\r\n                    <button className =\"inputBox\" type=\"submit\" >ثبت نام</button>\r\n                    )}\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n    loginInput(){\r\n        return(\r\n            <form id=\"authForm\" onSubmit={this.handleSubmit}>\r\n                <div className=\"topBox\">\r\n                    <ToastContainer autoClose={5000}/>\r\n                    <input className =\"inputBox\" type=\"text\" name=\"email\" placeholder=\"ایمیل\" onChange={this.handleEmail} required/>\r\n                    <input className =\"inputBox\" type=\"password\" name=\"password\" placeholder=\"رمز عبور\" onChange={this.handlePassword} required/>\r\n                    {this.state.clicked ? ( \r\n                        <button className =\"inputBox\" type=\"submit\" >\r\n                            <span className=\"spinner-grow spinner-grow-sm\"></span>\r\n                            ...منتظر بمانید\r\n                        </button>\r\n                    ):(\r\n                    <button className =\"inputBox\" type=\"submit\" >ورود</button>\r\n                    )}\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n    render(){\r\n        document.body.classList.add('authenticationBody');\r\n        return(\r\n            <div className=\"loghmeContainer\">\r\n                {this.props.type === 'signup' &&\r\n                    <div className=\"accountHeader\">\r\n                        <h1>ثبت نام</h1>\r\n                    </div>\r\n                }\r\n                {this.props.type === 'login' &&\r\n                    <div className=\"accountHeader\">\r\n                        <h1>ورود به سامانه </h1>\r\n                    </div>\r\n                }\r\n            <div className=\"accountBox\">\r\n                {this.props.type === 'signup' &&\r\n                    this.signupInput()\r\n                }\r\n                {this.props.type === 'login' &&\r\n                    this.loginInput()\r\n                }\r\n                <div className=\"bottomBox\">\r\n                    <div className=\"or\">یا</div>\r\n                    <span>ورود از طریق حساب‌های اجتماعی </span>\r\n                    <div className=\"logoBox\">\r\n                        <button className=\"loginBtn loginBtn--google\" ref=\"googleLoginBtn\">\r\n                            <i className=\"flaticon-Auth-google-plus-draw-logo\"></i>\r\n                        </button>\r\n                    </div>\r\n                    {this.props.type === 'signup' &&\r\n                        <a href=\"#\" className=\"alreadyDone\" onClick={this.handleAnother}>قبلا ثبت نام کرده‌اید؟ وارد سامانه شوید.</a>\r\n                    }\r\n                    {this.props.type === 'login' &&\r\n                        <a href=\"#\" className=\"alreadyDone\" onClick={this.handleAnother}>هنوز ثبت نام نکرده‌اید؟ ثبت نام کنید.</a> \r\n                    }\r\n                </div>\r\n                <Footer/>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nAuthentication.propTypes = {\r\n    type: PropTypes.string,\r\n};\r\n\r\nAuthentication.defaultProps = {\r\n    type: 'signup'\r\n}\r\n\r\nexport default Authentication;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport '../CSS/Normalize.css';\r\nimport '../CSS/headerStyles.css';\r\nimport '../CSS/basicStyles.css';\r\nimport '../CSS/footerStyles.css';\r\nimport '../CSS/infoBarStyles.css';\r\nimport '../CSS/profileStyles.css';\r\nimport '../CSS/ModalsStyles.css'\r\nimport '../media/FlatIcon/font/flaticon.css';\r\nimport Spinner from \"../components/Spinner\"\r\nimport Footer from \"../components/Footer\"\r\nimport Header from \"../components/Header\"\r\nimport InfoBar from \"./InfoBar\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Authentication from \"./Authentication\"\r\n\r\nclass Profile extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.fetchUser = this.fetchUser.bind(this)\r\n        this.handleClick = this.handleClick.bind(this)\r\n        this.showSelectBar = this.showSelectBar.bind(this)\r\n        this.showInfoBox = this.showInfoBox.bind(this)\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.handleSubmitCredit = this.handleSubmitCredit.bind(this)\r\n        this.createTable = this.createTable.bind(this)\r\n        this.handleFactor = this.handleFactor.bind(this)\r\n        this.renderFactor = this.renderFactor.bind(this)\r\n        this.showFactor = this.showFactor.bind(this)\r\n        this.createFactorTable = this.createFactorTable.bind(this)\r\n        this.showFactorElements = this.showFactorElements.bind(this)\r\n        this.showFactorElement = this.showFactorElement.bind(this)\r\n        this.hideFactor = this.hideFactor.bind(this)\r\n        this.showOrder = this.showOrder.bind(this)\r\n        this.showOrders = this.showOrders.bind(this)\r\n        this.state = {\r\n            user : \"\",\r\n            ready: false,\r\n            type: this.props.type,\r\n            newCredit:0,\r\n            readyBox : true,\r\n        };\r\n    }\r\n    componentDidMount(){\r\n        var now = new Date();\r\n        var expDate = new Date(localStorage.getItem(\"expDate\"));\r\n        if(now.getTime() >= expDate.getTime()) {\r\n            localStorage.removeItem(\"JWT\")\r\n            localStorage.removeItem(\"expDate\")\r\n            ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n        }\r\n        this.fetchUser()\r\n        this.timerId = setInterval(\r\n    \t\t() => {this.fetchUser()}\r\n    \t\t, 10000\r\n        );\r\n        window.addEventListener(\"click\", this.hideFactor);\r\n    }\r\n    fetchUser(){\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Authorization': jwtStr\r\n            })\r\n        }\r\n        fetch('http://ie.etuts.ir:31807/Loghme/users', requestOptions)\r\n        .then(response => {\r\n            const statusCode = response.status;\r\n            const data = response.json();\r\n            return Promise.all([statusCode, data]);\r\n        })\r\n        .then(([stat, data]) => {\r\n            if(stat===403){\r\n                localStorage.removeItem(\"JWT\")\r\n                localStorage.removeItem(\"expDate\")\r\n                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            if(stat===200){\r\n                var updatedUser = data;\r\n                this.setState({\r\n                    user : updatedUser,\r\n                    ready : true,\r\n                })\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n    handleClick(event, page){\r\n        event.preventDefault();\r\n        ReactDOM.render(<this.showInfoBox type = {page}/>, document.getElementById(\"infoBox\"));\r\n    }\r\n    showSelectBar(){\r\n        if(this.state.type === \"cart\"){\r\n            return(\r\n                <div className=\"selectBar\">\r\n                    <a className=\"orderButtonCart rounded-right\" href=\"#\" onClick={(e) => this.handleClick(e, \"order\")}>\r\n                        سفارش&zwnj;ها\r\n                    </a>\r\n                    <a className=\"increaseButtonCart rounded-left\" href=\"#\" onClick={(e) => this.handleClick(e, \"cart\")}>\r\n                        افزایش اعتبار\r\n                    </a>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            return(\r\n                <div className=\"selectBar\">\r\n                    <a className=\"orderButtonOrder rounded-right\" href=\"#\" onClick={(e) => this.handleClick(e, \"order\")}>\r\n                        سفارش&zwnj;ها\r\n                    </a>\r\n                    <a className=\"increaseButtonOrder rounded-left\" href=\"#\" onClick={(e) => this.handleClick(e, \"cart\")}>\r\n                        افزایش اعتبار\r\n                    </a>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    handleChange(event){\r\n        event.persist();\r\n        this.setState(prevState => ({newCredit : parseInt(event.target.value)}));\r\n    }\r\n    handleFactor(event,props){\r\n        event.preventDefault();\r\n        this.renderFactor(props)\r\n    }\r\n    renderFactor(props) {\r\n        const modalWindow = this.showFactor(props);\r\n        var modal = document.getElementById(\"factorModal\");\r\n        var content = document.getElementById(\"factorModal-content\");\r\n        content.classList.remove(\"zoomOut\");\r\n        content.classList.add(\"zoomIn\");\r\n        modal.style.display = \"block\";\r\n        ReactDOM.render(modalWindow, content);\r\n    }\r\n    showFactorElement(props){\r\n        return (\r\n            <tr>\r\n                <td>{String(props.number).toPersianDigits()}</td>\r\n                <td>{props.element.foodName}</td>\r\n                <td>{String(props.element.number).toPersianDigits()}</td>\r\n                <td>{String(props.element.price).toPersianDigits()}</td>\r\n            </tr>\r\n        )\r\n    }\r\n    createFactorTable = (props) => {\r\n        let factorTable = [];\r\n        var items = props.items;\r\n        for (let i = 0; i < items.length; i++) {\r\n            factorTable.push(<this.showFactorElement key={i} element={items[i]} number={i+1}/>)\r\n        }\r\n        return factorTable\r\n    }\r\n    showFactorElements(props){\r\n        return(\r\n            <table>\r\n                <tr>\r\n                    <th className=\"orderFood-number\">ردیف</th>\r\n                    <th className=\"orderFood-name\">نام غذا</th>\r\n                    <th className=\"orderFood-count\">تعداد</th>\r\n                    <th className=\"orderFood-price\">قیمت</th>\r\n                </tr>\r\n                {this.createFactorTable(props)}\r\n            </table>\r\n        )\r\n    }\r\n    showFactor(props) {\r\n        var factor = this.state.user.orders[props];\r\n        var totalPayment = String(factor.totalPayment).toPersianDigits()\r\n        return (\r\n            <div className=\"orderMoreInfoContainer orderDetails-modal-content modal-content\">\r\n                <div className=\"row col-12 mr-0 justify-content-center\">\r\n                    <div className=\"col-8 restaurantNameOfOrder\">\r\n                        {factor.restaurantName}\r\n                    </div>\r\n                </div>\r\n                <this.showFactorElements items={factor.items} />            \r\n                <div className=\"row col-12 mr-0 mb-3 justify-content-end text-left\">\r\n                    <div className=\"col-5 pl-4 pr-0 orderFood-totalPrice\">\r\n                        جمع کل : {totalPayment} تومان\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    hideFactor(event) {\r\n        var modal = document.getElementById(\"factorModal\");\r\n        var content = document.getElementById(\"factorModal-content\");\r\n        if (event.target == modal || event.target == content) {\r\n            content.classList.remove(\"zoomIn\");\r\n            content.classList.add(\"zoomOut\");\r\n            setTimeout(() =>{\r\n                modal.style.display = \"none\";\r\n            },200);\r\n        }\r\n    }\r\n    handleSubmitCredit(event){\r\n        event.preventDefault();\r\n        this.setState(prevState => ({readyBox: false}))\r\n        if(isNaN(this.state.newCredit) || this.state.newCredit <= 0){\r\n            toast.error(\"Bad input format\")\r\n            document.getElementById(\"creditForm\").reset()\r\n            this.setState(prevState => ({readyBox: true}))\r\n            return\r\n        }\r\n        var params = {\r\n\t\t    \"credit\": this.state.newCredit,\r\n        };\r\n\t\tvar queryString = Object.keys(params).map(function(key) {\r\n    \t\treturn key + '=' + params[key]\r\n        }).join('&');\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n\t\tconst requestOptions = {\r\n\t        method: 'POST',\r\n\t        headers: new Headers({ \r\n\t        \t'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n                'Authorization': jwtStr\r\n\t        }),\r\n\t        body: queryString\r\n\t    };\r\n        fetch(`http://ie.etuts.ir:31807/Loghme/users`, requestOptions)\r\n        .then((response) => {\r\n            if(response.status === 403) {\r\n                localStorage.removeItem(\"JWT\")\r\n                localStorage.removeItem(\"expDate\")\r\n                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            else {\r\n                this.setState(prevState => ({\r\n                    newCredit : 0,\r\n                    readyBox: true,    \r\n                }))\r\n                ReactDOM.render(<Profile type={\"cart\"}/>, document.getElementById(\"root\"));\r\n                document.getElementById(\"creditForm\").reset()\r\n                toast.success(\"Credit increamented successfully\")\r\n            }\r\n        })\r\n        .catch(function (error) {\r\n            toast.error(\"Credit increament failed\")\r\n        })\r\n    }\r\n    \r\n    showOrder(props){\r\n        var restaurantName = (props.order.restaurantName.length > 25) ? \"...\"+props.order.restaurantName.substring(0,25) : props.order.restaurantName;\r\n        let orderState;\r\n        if(props.order.state === \"Searching\"){\r\n            orderState = [\r\n                <div className=\"col-md-8 offset-md-2 deliveringState rounded\">\r\n                    در جست&zwnj;جوی پیک\r\n                </div>\r\n            ]\r\n        }\r\n        else if(props.order.state === \"Delivering\"){\r\n            orderState = [\r\n                <div className=\"col-md-8 offset-md-2 deliveringState rounded\">\r\n                    پیک در مسیر\r\n                </div>\r\n            ]\r\n        }\r\n        else{\r\n            orderState = [\r\n                <button id={props.number-1} className=\"deliveredState col-md-8 offset-md-2 btn btn-block rounded\"  type=\"submit\" onClick={(e) => this.handleFactor(e,props.number-1)}>مشاهده فاکتور</button>\r\n            ]\r\n        }\r\n               \r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-4 offset-md-1 ordersCell rounded-left\">\r\n                    <div className=\"row-no-padding\">\r\n                        {orderState}\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-5 ordersCell\">{restaurantName}</div>\r\n                <div className=\"col-md-1 ordersCell rounded-right\">{String(props.number).toPersianDigits()}</div>\r\n            </div>\r\n        )\r\n    }\r\n    createTable = () => {\r\n        let orderTable = [];\r\n        var orders = this.state.user.orders;\r\n        for (let i = 0; i < orders.length; i++) {\r\n            orderTable.push(<this.showOrder key={orders[i].id} order={orders[i]} number={i+1}/>)\r\n        }\r\n        return orderTable\r\n    }\r\n    showOrders(){\r\n        return( \r\n            <div className=\"col-md-12 mt-3\">\r\n                {this.createTable()}\r\n            </div>             \r\n        )\r\n    }\r\n    showInfoBox(props){\r\n        if(props.type !== this.state.type){\r\n            this.setState({\r\n                type:props.type\r\n            })\r\n        }\r\n        if(props.type === \"cart\"){\r\n            return(\r\n                <form id=\"creditForm\" onSubmit={this.handleSubmitCredit}>\r\n                    <div id = \"infoBox\" className=\"infoBox\">\r\n                        <ToastContainer/>\r\n                        <this.showSelectBar/>\r\n                        <div className=\"dataContainer row\">\r\n                            <div className=\"col-md-3 offset-md-1 increaseButtonLink\">\r\n                                {!this.state.readyBox ? ( \r\n                                    <button className=\"increaseButton btn rounded\" type=\"submit\">\r\n                                        <span className=\"spinner-grow spinner-grow-sm\"></span>\r\n                                    </button>\r\n                                ):(\r\n                                    <button className=\"increaseButton btn rounded\" type=\"submit\"> افزایش</button>\r\n                                )}\r\n                            </div>\r\n                            \r\n                            <div className=\"col-md-7\">\r\n                                <div className=\"increaseField\">\r\n                                    <input type=\"text\" className=\"formCtrl\" placeholder=\"میزان افزایش اعتبار\" name=\"credit\" \r\n                                    onChange={this.handleChange}\r\n                                    />\r\n                                </div>\r\n                            </div>  \r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            )\r\n        }\r\n        else{\r\n            return(\r\n                <div id = \"infoBox\" className=\"infoBox\">\r\n                    <this.showSelectBar/>\r\n                    <div className=\"row dataContainer\">\r\n                        <this.showOrders/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    render(){\r\n        if(this.state.ready){     \r\n            return(\r\n                <div className=\"container-fluid loghmeContainer bg\">\r\n                    <Header value = {this.state.type}/>\r\n                    <ToastContainer/>\r\n                    <InfoBar type = {\"profile\"} value = {this.state.user}/>\r\n                    <this.showInfoBox id=\"infoBox\" type ={this.state.type}/>\r\n                    <div id=\"factorModal\" className=\"orderDetails-modal modal\">\r\n                        <div id=\"factorModal-content\" className=\"row animated faster zoomIn text-center\">\r\n                        </div>\r\n                    </div>\r\n                    <Footer />\r\n                </div>\r\n            )\r\n        }\r\n        else{\r\n            return(\r\n                <div className=\"container-fluid loghmeContainer bg\">\r\n                    <Header value = {\"profile\"}/>\r\n                    <ToastContainer/>\r\n                    <div className=\"pt-5\">\r\n                        <Spinner/>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    \r\n    componentWillUnmount(){\r\n        clearInterval(this.timerId);\r\n    }\r\n}\r\n\r\nProfile.propTypes = {\r\n    type: PropTypes.string,\r\n}\r\n\r\nProfile.defaultProps = {\r\n    type : \"cart\"\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../CSS/Normalize.css';\r\nimport '../CSS/basicStyles.css';\r\nimport '../CSS/restaurantStyles.css';\r\nimport '../CSS/ModalsStyles.css';\r\nimport '../media/FlatIcon/font/flaticon.css';\r\nimport Spinner from \"../components/Spinner\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Authentication from \"./Authentication\"\r\n\r\nString.prototype.toPersianDigits= function(){\r\n    var id = ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];\r\n    return this.replace(/[0-9]/g, function(w){\r\n        return id[+w]\r\n    });\r\n}\r\n\r\nclass Cart extends React.Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.fetchCart = this.fetchCart.bind(this)\r\n        this.showAddedFood = this.showAddedFood.bind(this)\r\n        this.createCart = this.createCart.bind(this)\r\n        this.showCart = this.showCart.bind(this)\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n        this.addFood = this.addFood.bind(this)\r\n        this.deleteFood = this.deleteFood.bind(this)\r\n        this.state = {\r\n            cart : \"\",\r\n            ready : false,\r\n            isEmpty : true,\r\n        }\r\n    }\r\n    fetchCart(){\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Authorization': jwtStr\r\n            })\r\n        }\r\n        fetch(`http://ie.etuts.ir:31807/Loghme/users/cart`, requestOptions)\r\n        .then(response => {\r\n            const statusCode = response.status;\r\n            const data = response.json();\r\n            return Promise.all([statusCode, data]);\r\n        })\r\n        .then(([stat, data]) => {\r\n            if(stat===403){\r\n                localStorage.removeItem(\"JWT\")\r\n                localStorage.removeItem(\"expDate\")\r\n                clearInterval(this.timerId)\r\n                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            if(stat===200){\r\n                var newCart = data;\r\n                this.setState({\r\n                    cart: newCart,\r\n                    ready: true,\r\n                    isEmpty : false,\r\n                    buttonReady: true,\r\n                });\r\n            }\r\n        })\r\n        .catch(error => {\r\n            this.setState({\r\n                ready: true,\r\n                isEmpty : true,\r\n                buttonReady: true,\r\n            });\r\n        })\r\n    }\r\n    handleSubmit(event){\r\n        event.preventDefault()\r\n        this.setState(prevState => ({buttonReady:false}));\r\n        var toastId = toast.warn(\"Finalizing your order!..\")\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n\t\tconst requestOptions = {\r\n\t        method: 'POST',\r\n\t        headers: new Headers({ \r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n                'Authorization': jwtStr\r\n\t        }),\r\n        };\r\n        fetch('http://ie.etuts.ir:31807/Loghme/users/finalize', requestOptions)\r\n        .then((response) => {\r\n            this.setState(prevState => ({\r\n                buttonReady:true,\r\n            }))\r\n            if (response.ok) {\r\n                toast.dismiss(toastId)\r\n                toast.success(\"Your order finalized successfully!\")\r\n            } else {\r\n                toast.dismiss(toastId)\r\n                if(response.status===403){\r\n                    console.log(JSON.stringify(response.json()))\r\n                    if(JSON.stringify(response.json()) === \"BAD_JWT\") {\r\n                        localStorage.removeItem(\"JWT\")\r\n                        localStorage.removeItem(\"expDate\")\r\n                        clearInterval(this.timerId)\r\n                        ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n                    }\r\n                    else {\r\n                        toast.error(\"Party food time is over!\")\r\n                        this.setState(prevState => ({\r\n                            isEmpty: true,\r\n                        }))\r\n                    }\r\n                }\r\n                if(response.status===400){\r\n                    toast.error(\"Not enough credit!\")\r\n                }\r\n            }\r\n        })\r\n        .catch(() =>{\r\n            toast.error(\"You can not finalize your order!\")\r\n            this.setState(prevState => ({\r\n                buttonReady:true,\r\n            }))\r\n        }\r\n        )\r\n    }\r\n    componentDidMount(){\r\n        var now = new Date();\r\n        var expDate = new Date(localStorage.getItem(\"expDate\"));\r\n        if(now.getTime() >= expDate.getTime()) {\r\n            localStorage.removeItem(\"JWT\")\r\n            localStorage.removeItem(\"expDate\")\r\n            ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n        }\r\n        this.fetchCart()\r\n        this.timerId = setInterval(\r\n    \t\t() => {this.fetchCart()}\r\n    \t\t, 5000\r\n        );\r\n    }\r\n    componentWillUnmount(){\r\n        clearInterval(this.timerId)\r\n    }\r\n    deleteFood(event, index){\r\n        event.preventDefault()\r\n        var item = this.state.cart.items[index]\r\n        var toastId = toast.warn(\"Deleting \"+item.foodName+\" to your cart!..\")\r\n        var params = {\r\n\t\t    \"id\" : this.state.cart.restaurantId,\r\n\t\t    \"name\" : item.foodName,\r\n            \"action\" : \"delete\",\r\n            \"count\" : 1,\r\n        };\r\n\t\tvar queryString = Object.keys(params).map(function(key) {\r\n    \t\treturn key + '=' + params[key]\r\n        }).join('&');\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n\t\tconst requestOptions = {\r\n\t        method: 'POST',\r\n\t        headers: new Headers({ \r\n\t        \t'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n                'Authorization': jwtStr\r\n\t        }),\r\n\t        body: queryString\r\n        };\r\n        if(item.partyFood){\r\n            fetch('http://ie.etuts.ir:31807/Loghme/foodparty', requestOptions)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    toast.dismiss(toastId)\r\n                    toast.success(\"Party food deleted from your cart successfully!\")\r\n                } else {\r\n                    toast.dismiss(toastId)\r\n                    if(response.status===403){\r\n                        if(JSON.stringify(response.json()) === \"BAD_JWT\") {\r\n                            localStorage.removeItem(\"JWT\")\r\n                            localStorage.removeItem(\"expDate\")\r\n                            clearInterval(this.timerId)\r\n                            ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n                        }\r\n                        else {    \r\n                            toast.error(\"Party food time is over!\")\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            .catch(() =>{\r\n                toast.dismiss(toastId)\r\n            })\r\n        }\r\n        else{\r\n            fetch('http://ie.etuts.ir:31807/Loghme/users/cart', requestOptions)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    toast.dismiss(toastId)\r\n                    toast.success(\"Food deleted from your cart successfully!\")\r\n                } else {\r\n                    if(response.status===403){\r\n                        if(JSON.stringify(response.json()) === \"BAD_JWT\") {\r\n                            localStorage.removeItem(\"JWT\")\r\n                            localStorage.removeItem(\"expDate\")\r\n                            clearInterval(this.timerId)\r\n                            ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n                        }\r\n                    }\r\n                    toast.dismiss(toastId)\r\n                    toast.error(\"You can not order this food again!\")\r\n                }\r\n            })\r\n            .catch(() =>{\r\n                toast.dismiss(toastId)\r\n            })\r\n        }\r\n    }\r\n    addFood(event, index){\r\n        event.preventDefault();\r\n        var item = this.state.cart.items[index]\r\n        var toastId = toast.warn(\"Adding \"+item.foodName+\" to your cart!..\")\r\n        var params = {\r\n\t\t    \"id\" : this.state.cart.restaurantId,\r\n\t\t    \"name\" : item.foodName,\r\n            \"action\" : \"add\",\r\n            \"count\" : 1,\r\n        };\r\n\t\tvar queryString = Object.keys(params).map(function(key) {\r\n    \t\treturn key + '=' + params[key]\r\n        }).join('&');\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n\t\tconst requestOptions = {\r\n\t        method: 'POST',\r\n\t        headers: new Headers({ \r\n\t        \t'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n                'Authorization': jwtStr\r\n\t        }),\r\n\t        body: queryString\r\n        };\r\n        if(item.partyFood){\r\n            fetch('http://ie.etuts.ir:31807/Loghme/foodparty', requestOptions)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    toast.dismiss(toastId)\r\n                    toast.success(\"Party food added to your cart successfully!\")\r\n                } else {\r\n                    toast.dismiss(toastId)\r\n                    if(response.status===404){\r\n                        toast.error(\"Party food time is over!\")\r\n                    }\r\n                    if(response.status===403){\r\n                        if(response.status===403){\r\n                            if(JSON.stringify(response.json()) === \"BAD_JWT\") {\r\n                                localStorage.removeItem(\"JWT\")\r\n                                localStorage.removeItem(\"expDate\")\r\n                                clearInterval(this.timerId)\r\n                                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n                            }\r\n                            else {    \r\n                                toast.error(\"There is no more \"+item.foodName+\"in foodparty!\")\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            .catch(() =>{\r\n                toast.dismiss(toastId)\r\n            })\r\n        }\r\n        else{\r\n            fetch('http://ie.etuts.ir:31807/Loghme/users/cart', requestOptions)\r\n            .then((response) => {\r\n                if (response.ok) {\r\n                    toast.dismiss(toastId)\r\n                    toast.success(\"Food added to your cart successfully!\")\r\n                } else {\r\n                    if(response.status===403){\r\n                        if(JSON.stringify(response.json()) === \"BAD_JWT\") {\r\n                            localStorage.removeItem(\"JWT\")\r\n                            localStorage.removeItem(\"expDate\")\r\n                            clearInterval(this.timerId)\r\n                            ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n                        }\r\n                    }\r\n                    toast.dismiss(toastId)\r\n                    toast.error(\"You can not order this food again!\")\r\n                }\r\n            })\r\n            .catch(() =>{\r\n                toast.dismiss(toastId)\r\n            })\r\n        }\r\n    }\r\n    showAddedFood(props){\r\n        var price = parseInt(props.price)*parseInt(props.number)\r\n        var foodName = (props.foodName.length > 8) ? props.foodName.substring(0,8)+\"...\" : props.foodName;\r\n        return (\r\n            <div>\r\n                <div className=\"firstItem shoppingCartItem justify-content-around\">\r\n                    <div className=\"col-7 text-right\">{foodName}</div>\r\n                    <div className=\"col-5\">\r\n                        <a href=\"#\" onClick={(event) => this.deleteFood(event,props.index)}>\r\n                            <i className=\"flaticon-loghme-minus\"></i>\r\n                        </a>\r\n                        {String(props.number).toPersianDigits()}\r\n                        <a href=\"#\" onClick={(event) => this.addFood(event,props.index)}>\r\n                            <i className=\"flaticon-loghme-plus\"></i>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div className=\"price priceUnderline\">{String(price).toPersianDigits()} تومان</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    createCart = () => {\r\n        let cartTable = [];\r\n        for (let i = 0; i < this.state.cart.items.length; i++) {\r\n            cartTable.push(<this.showAddedFood key={this.state.cart.items[i].foodName} index={i} foodName={this.state.cart.items[i].foodName} \r\n                number={this.state.cart.items[i].number} price={this.state.cart.items[i].price} />)\r\n        }\r\n\r\n        return cartTable\r\n    }\r\n    showCart(){\r\n        return( \r\n            <div className=\"shoppingCartContents\">\r\n                {this.createCart()}\r\n            </div> \r\n            \r\n        )\r\n    }\r\n\r\n    render(){\r\n        if(!this.state.ready){\r\n            return(\r\n            <div className=\"col-3 align-self-start justify-content-center shoppingCart borderShadow\">\r\n                <div className=\"shoppingCartText text-center\">سبد خرید</div>\r\n                <div className=\"shoppingCartContents\">\r\n                    <Spinner/>\r\n                </div>\r\n            </div>\r\n            )\r\n        }\r\n        else{\r\n            if(this.state.isEmpty === true){\r\n                return(\r\n                    <div className=\"col-3 align-self-start justify-content-center shoppingCart borderShadow\">\r\n                        <div className=\"shoppingCartText text-center\">سبد خرید</div>\r\n                        <div className=\"shoppingCartContents\">\r\n                            <div className=\"col-12 text-center\">غذایی انتخاب نشده است.</div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n            else{\r\n                return(\r\n                <div className=\"col-3 align-self-start justify-content-center shoppingCart borderShadow\">\r\n                <div className=\"shoppingCartText text-center\">سبد خرید</div>\r\n                <this.showCart/>\r\n                <div className=\"row justify-content-center\">\r\n                    <div className=\"totalPriceText\">جمع کل:</div>\r\n                    <div className=\"totalPriceValue\">{String(this.state.cart.totalPayment).toPersianDigits()} تومان</div>\r\n                </div>\r\n                <div className=\"row justify-content-center\">\r\n                    <button className=\"col-6 pl-1 pr-1 text-center btn submitButton\" type=\"submit\"  onClick={(e) => this.handleSubmit(e)}>\r\n                        تایید نهایی\r\n                    </button>\r\n                </div>\r\n                </div>\r\n                )\r\n            } \r\n        }     \r\n    }\r\n}\r\n\r\nexport default Cart;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport '../CSS/Normalize.css';\r\nimport '../CSS/headerStyles.css';\r\nimport '../CSS/basicStyles.css';\r\nimport '../CSS/ModalsStyles.css'\r\nimport '../media/FlatIcon/font/flaticon.css';\r\nimport Home from \"../containers/HomeContainers/Home\"\r\nimport Profile from \"../containers/Profile\"\r\nimport Authentication from \"../containers/Authentication\"\r\nimport Cart from \"../containers/Cart\"\r\n\r\nclass Header extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.handleCart= this.handleCart.bind(this)\r\n        this.renderCart = this.renderCart.bind(this)\r\n        this.hideCart = this.hideCart.bind(this)\r\n    }\r\n    componentDidMount(){\r\n        window.addEventListener(\"click\", this.hideCart);\r\n    }\r\n    goHome(event){\r\n        event.preventDefault();\r\n        ReactDOM.render(<Home type={\"normal\"}/>, document.getElementById(\"root\"));\r\n    }\r\n    goProfile(event){\r\n        event.preventDefault();\r\n        ReactDOM.render(<Profile type={\"cart\"}/>, document.getElementById(\"root\"));\r\n    }\r\n    logout(event){\r\n        event.preventDefault();\r\n        localStorage.removeItem(\"JWT\")\r\n        localStorage.removeItem(\"expDate\")\r\n        ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n    }\r\n\r\n    handleCart(event){\r\n        event.preventDefault();\r\n        this.renderCart()\r\n    }\r\n    renderCart() {\r\n        var modal = document.getElementById(\"cartModal\");\r\n        var content = document.getElementById(\"cartModal-content\");\r\n        content.classList.remove(\"zoomOut\");\r\n        content.classList.add(\"zoomIn\");\r\n        modal.style.display = \"block\";\r\n        ReactDOM.render(<Cart/>, content);\r\n    }\r\n    hideCart(event) {\r\n        var modal = document.getElementById(\"cartModal\");\r\n        var content = document.getElementById(\"cartModal-content\");\r\n        if (event.target == modal || event.target == content) {\r\n            content.classList.remove(\"zoomIn\");\r\n            content.classList.add(\"zoomOut\");\r\n            setTimeout(() =>{\r\n                modal.style.display = \"none\";\r\n                ReactDOM.unmountComponentAtNode(content)\r\n            },200);\r\n        }\r\n    }\r\n    render(){\r\n        return (\r\n            <div className=\"row header\">\r\n                <div className=\"headerLeftSide\">\r\n                    <div className=\"exitContainer\">\r\n                        <a className=\"exit\" href=\"#\" onClick={(e) => this.logout(e)}>خروج</a>\r\n                    </div>\r\n                    {this.props.value !== \"profile\" && this.props.value !== \"cart\" && this.props.value !== \"order\" &&\r\n                        <div className=\"userProfileContainer\">\r\n                            <a className=\"userProfile\" href=\"#\" onClick={(e) => this.goProfile(e)}>حساب کاربری</a>\r\n                        </div>\r\n                    }\r\n                    <div className=\"cartIconContainer\">\r\n                        <a href=\"#\" onClick={(e) => this.handleCart(e)}>\r\n                            <i className=\"flaticon-loghme-smart-cart\"></i>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div id=\"cartModal\" className=\"cart-modal modal\">\r\n                    <div id=\"cartModal-content\" className=\"row justify-content-center animated faster zoomIn text-center\">\r\n                    </div>\r\n                </div>\r\n                {this.props.value !== \"home\" &&\r\n                    <div className=\"LoghmeLogoContainer\">\r\n                        <a href=\"#\" onClick={(e) => this.goHome(e)}>\r\n                            <img className=\"LoghmeLogo\" src={require('../media/Pics/LOGO.png')} alt=\"logo\"/>\r\n                        </a>\r\n                    </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nHeader.propTypes = {\r\n    type: PropTypes.string,\r\n};\r\n\r\nHeader.defaultProps = {\r\n    value: 'home'\r\n}\r\nexport default Header;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport '../../CSS/Normalize.css';\r\nimport '../../CSS/basicStyles.css';\r\nimport '../../CSS/infoBarStyles.css';\r\nimport '../../CSS/homePageStyles.css';\r\nimport '../../CSS/homeSearchBar.css';\r\nimport '../../CSS/ModalsStyles.css'\r\nimport '../../media/FlatIcon/font/flaticon.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Authentication from \"../Authentication\"\r\n\r\nString.prototype.toPersianDigits= function(){\r\n    var id = ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];\r\n    return this.replace(/[0-9]/g, function(w){\r\n        return id[+w]\r\n    });\r\n}\r\n\r\nclass FoodParty extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.fetchParty = this.fetchParty.bind(this);\r\n        this.remainingTime = this.remainingTime.bind(this);\r\n        this.showPartyFoods = this.showPartyFoods.bind(this);\r\n        this.showPartyFood = this.showPartyFood.bind(this);\r\n        this.handleModal = this.handleModal.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.showPartyFoodBuyModal = this.showPartyFoodBuyModal.bind(this);\r\n        this.hidePartyFoodBuyModal = this.hidePartyFoodBuyModal.bind(this);\r\n        this.increaseOrderCount = this.increaseOrderCount.bind(this);\r\n        this.decreaseOrderCount = this.decreaseOrderCount.bind(this);\r\n        this.renderModal = this.renderModal.bind(this);\r\n        this.state = {\r\n            partyFoods : [],\r\n            date : \"\",\r\n            orderCount : 0,\r\n            ready : false,\r\n            timer : false,\r\n        };\r\n    }\r\n\r\n    fetchParty(){\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Authorization': jwtStr\r\n            })\r\n        }\r\n        fetch(`http://ie.etuts.ir:31807/Loghme/foodparty`, requestOptions)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            if(JSON.stringify(data) === \"BAD_JWT\"){\r\n                localStorage.removeItem(\"JWT\")\r\n                localStorage.removeItem(\"expDate\")\r\n                clearInterval(this.timerId)\r\n                clearInterval(this.timerTime)\r\n                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            else if(data !== undefined){\r\n                var updatedParty = data;\r\n                var date = JSON.parse(JSON.stringify(updatedParty.enteredDate));\r\n                const enteredDate = (date!== null) ? new Date(date.year,date.monthValue-1, date.dayOfMonth, date.hour, date.minute, date.second, 0)\r\n                : \"\";\r\n                var foods = JSON.parse(JSON.stringify(updatedParty.partyFoods));\r\n                this.setState({\r\n                    partyFoods : foods,\r\n                    date : enteredDate,\r\n                    ready: true,\r\n                });\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchParty()\r\n        this.timerId = setInterval(\r\n    \t\t() => {this.fetchParty()}\r\n    \t\t, 10000\r\n        );\r\n        this.timerTime = setInterval(() => {\r\n            this.setState({ timer : true })\r\n            this.remainingTime()}\r\n            , 1000\r\n        );\r\n        window.addEventListener(\"click\", this.hidePartyFoodBuyModal);\r\n    }\r\n\r\n    handleModal(event,props) {\r\n        event.preventDefault()\r\n        this.renderModal(props)\r\n    }\r\n\r\n    renderModal(props) {\r\n        const modalWindow = this.showPartyFoodBuyModal(props);\r\n        var modal = document.getElementById(\"partyFoodsModal\");\r\n        var content = document.getElementById(\"partyFoodsModal-content\");\r\n        content.classList.remove(\"zoomOut\");\r\n        content.classList.add(\"zoomIn\");\r\n        modal.style.display = \"block\";\r\n        ReactDOM.render(modalWindow, content);\r\n    }\r\n\r\n    increaseOrderCount(props) {\r\n        var newCount = this.state.orderCount + 1;\r\n        if (this.state.orderCount < props.count) {\r\n            this.setState({\r\n                orderCount : newCount\r\n            }, () => this.renderModal(props));\r\n        } else {\r\n            toast.error(\"There is no more available food!\")\r\n        }\r\n    }\r\n\r\n    decreaseOrderCount(props) {\r\n        var newCount = this.state.orderCount - 1;\r\n        if (this.state.orderCount > 0) {\r\n            this.setState({\r\n                orderCount : newCount\r\n            }, () => this.renderModal(props));\r\n        } else {\r\n            toast.error(\"The least possible choice!\")\r\n        }\r\n    }\r\n\r\n    handleSubmit(event, props){\r\n        event.preventDefault()\r\n        var toastId = toast.warn(\"Ordering your food...\");\r\n        if(this.state.orderCount === 0){\r\n            toast.dismiss(toastId);\r\n            toast.error(\"You must choose at least 1 food!\")\r\n            return\r\n        }\r\n        var params = {\r\n\t\t    \"id\" : props.restaurantId,\r\n\t\t    \"name\" : props.name,\r\n            \"action\" : \"add\",\r\n            \"count\" : this.state.orderCount,\r\n        };\r\n\t\tvar queryString = Object.keys(params).map(function(key) {\r\n    \t\treturn key + '=' + params[key]\r\n        }).join('&');\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n\t\tconst requestOptions = {\r\n\t        method: 'POST',\r\n\t        headers: new Headers({ \r\n\t        \t'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n                'Authorization': jwtStr\r\n\t        }),\r\n\t        body: queryString\r\n        };\r\n        fetch('http://ie.etuts.ir:31807/Loghme/foodparty', requestOptions)\r\n        .then((response) => {\r\n            this.setState(prevState => ({\r\n                orderCount : 0,\r\n            }))\r\n            this.renderModal(props)\r\n            if (response.ok) {\r\n                toast.dismiss(toastId);\r\n                toast.success(\"Food added to your cart successfully!\")\r\n            } else {\r\n                toast.dismiss(toastId)\r\n                if(response.status===403){\r\n                    if(JSON.stringify(response.json()) === \"BAD_JWT\") {\r\n                        localStorage.removeItem(\"JWT\")\r\n                        localStorage.removeItem(\"expDate\")\r\n                        clearInterval(this.timerId)\r\n                        clearInterval(this.timerTime)\r\n                        ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n                    }\r\n                    toast.error(\"You chose your restaurant before or food is over!\")\r\n                }\r\n            }\r\n        })\r\n        .then(() => {\r\n            var modal = document.getElementById(\"partyFoodsModal\");\r\n            var content = document.getElementById(\"partyFoodsModal-content\");\r\n            content.classList.remove(\"zoomIn\");\r\n            content.classList.add(\"zoomOut\");\r\n            setTimeout(() =>{\r\n                modal.style.display = \"none\";\r\n            },200);\r\n        })\r\n        .catch(() =>\r\n            toast.error(\"Your order could not submitted completely!\")\r\n        )\r\n    }\r\n\r\n    showPartyFoodBuyModal(props) {\r\n        var count = (props.count == 0) ? \"ناموجود\" : \"موجودی: \"+String(props.count).toPersianDigits();\r\n        return (\r\n            <div className=\"foodMoreInfoContainer food-modal-content modal-content\">\r\n                <form onSubmit={(e) => this.handleSubmit(e, props)}>\r\n                    <div className=\"col-12 foodMoreInfo\">\r\n                        {props.restaurantName}\r\n                    </div>\r\n                    <div className=\"row ml-0 mr-0 bottomDashedBorder\">\r\n                        <div className=\"col-4 pl-0 pr-1 mr-2\">\r\n                            <img className=\"foodBigLogo borderShadow\" src={props.image}/>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"row no-gutters\">\r\n                                <div className=\"col-auto foodBigName\">{props.name}</div>\r\n                                <div className=\"row ml-0 mr-0 justify-content-start\">\r\n                                <div className=\"starBigIcon text-right\">&#9733;</div>\r\n                                <div className=\"foodBigRate\">{String(5 * props.popularity).toPersianDigits()}</div>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"row no-gutters\">\r\n                                <div className=\"foodDescription\">{props.description}</div>\r\n                            </div>\r\n                \r\n                            <div className=\"row no-gutters pt-3\">\r\n                                <div className=\"partyFoodOldBigPrice pl-0\"><s className=\"partyFoodOldBigPrice\">{String(props.oldPrice).toPersianDigits()}</s></div>\r\n                                <div className=\"partyFoodNewBigPrice pl-0\">{String(props.price).toPersianDigits()} تومان</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row stockContainer-big ml-0 mr-0 text-center justify-content-around\">\r\n                        <div className=\"col-2 partyStockBigInfo align-self-center\">{count}</div>\r\n                        <div className=\"row col-2 pl-0 pr-0 foodCount-big justify-content-center align-self-center\">\r\n                            <a href=\"#\" onClick={() => this.increaseOrderCount(props)}>\r\n                                <i className=\"flaticon-loghme-big-plus\"></i>\r\n                            </a>\r\n                            <div className=\"mr-2 ml-2\">{String(this.state.orderCount).toPersianDigits()}</div>\r\n                            <a href=\"#\" onClick={() => this.decreaseOrderCount(props)}>\r\n                                <i className=\"flaticon-loghme-big-minus\"></i>\r\n                            </a>\r\n                        </div>\r\n                        <button className=\"col-4 buyFoodBigButton payBlueBG btn align-self-center\" type=\"submit\">افزودن به سبد خرید</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    hidePartyFoodBuyModal(event) {\r\n        var modal = document.getElementById(\"partyFoodsModal\");\r\n        var content = document.getElementById(\"partyFoodsModal-content\");\r\n        if (event.target == modal || event.target == content) {\r\n            content.classList.remove(\"zoomIn\");\r\n            content.classList.add(\"zoomOut\");\r\n            setTimeout(() =>{\r\n                modal.style.display = \"none\";\r\n                this.setState({\r\n                    orderCount : 0\r\n                });\r\n            },200);\r\n        }\r\n    }\r\n\r\n    showPartyFood(props){\r\n        var name = (props.partyFood.name.length > 4) ? props.partyFood.name.substring(0,4)+\"...\" : props.partyFood.name;\r\n        var restaurantName = (props.partyFood.restaurantName.length > 20) ? props.partyFood.restaurantName.substring(0,20)+\"...\" : props.partyFood.restaurantName;\r\n        var count = (props.partyFood.count == 0) ? \"ناموجود\" : \"موجودی: \"+String(props.partyFood.count).toPersianDigits();\r\n        return (\r\n            <div className=\"partyFoodInfo borderShadow\">\r\n                <div className=\"row no-gutters text-center mr-1 ml-1 justify-content-center\">\r\n                    <img className=\"partyFoodLogo\" src={props.partyFood.image}/>\r\n                    <div className=\"col-auto\">\r\n                        <div className=\"col-auto partyFoodName\">{name}</div>\r\n                        <div className=\"row ml-0 mr-0 pr-2 justify-content-start\">\r\n                        <div className=\"partyFoodRate\">{String(5 * props.partyFood.popularity).toPersianDigits()}</div>\r\n                            <div className=\"starIcon text-right\">&#9733;</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row text-center mr-1 ml-1 mt-2 pb-1 justify-content-around\">\r\n                    <div className=\"partyFoodOldPrice pl-0\"><s className=\"partyFoodOldPrice\">{String(props.partyFood.oldPrice).toPersianDigits()}</s></div>\r\n                    <div className=\"partyFoodNewPrice pl-0\">{String(props.partyFood.price).toPersianDigits()}</div>\r\n                </div>\r\n                <div className=\"row text-center mt-2 mr-0 ml-0 justify-content-around\">\r\n                    <div className=\"col-5 partyStockInfo align-self-center\">{count}</div>\r\n                    { props.partyFood.count === 0\r\n                        ? <div className=\"col-5 partyBuyButton payGrayBG btn\">خرید</div>\r\n                        : <button id={props.partyFood.restaurantId+\"-\"+props.partyFood.restaurantName} className=\"col-5 partyBuyButton payBlueBG btn\" type=\"submit\" onClick={(e) => this.handleModal(e,props.partyFood)}>خرید</button>\r\n                    }\r\n                </div>\r\n                <div className=\"bottomDashedBorder mt-1\"></div>\r\n                <div className=\"row partyRestaurantName pt-1 justify-content-center\">{restaurantName}</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    showPartyFoods(){\r\n        const items = this.state.partyFoods.map((item, index)=>\r\n            <this.showPartyFood key={index} partyFood={item} />\r\n        )\r\n        return(  \r\n            items\r\n        )\r\n    }\r\n\r\n    remainingTime(){\r\n        var min;\r\n        var sec;\r\n        if(this.state.date !== \"\" ){\r\n            var now = new Date()\r\n            var remainedTime = 30*60000-(now.getTime() - this.state.date.getTime())\r\n            min = Math.floor(remainedTime / 60000)\r\n            sec = Math.floor((remainedTime - min*60000) / 1000)\r\n            if (min < 0 || sec < 0){\r\n                min = 0\r\n                sec = 0\r\n                this.fetchParty()\r\n            }\r\n        }\r\n        else{\r\n            min = \"00\"\r\n            sec = \"00\"\r\n        }\r\n        return(\r\n            <div className=\"row col-12 justify-content-center\">\r\n                <div className=\"row remainingTimeBox rounded justify-content-between\">\r\n                    <div className=\"col-9 pl-0 pr-0 align-self-center text-right\">زمان باقی&zwnj;مانده:</div>\r\n                    <div className=\"col-3 pl-0 pr-0 align-self-center text-left\">{String(min).toPersianDigits()}:{String(sec).toPersianDigits()}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"row mt-3 justify-content-center\">\r\n                <ToastContainer/>\r\n                <div className=\"row col-12 justify-content-center\">\r\n                    <div className=\"col-2 titles titlesUnderline pr-0 pl-0 text-center\">جشن غذا!</div>\r\n                </div>\r\n                <this.remainingTime />\r\n                <div className=\"col-12 foodPartyMenu borderShadow text-center\">\r\n                    {this.state.ready &&\r\n                        <this.showPartyFoods />\r\n                    }\r\n                    <div id=\"partyFoodsModal\" className=\"food-modal modal\">\r\n                        <div id=\"partyFoodsModal-content\" className=\"row animated faster zoomIn text-center\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        clearInterval(this.timerId)\r\n        clearInterval(this.timerTime)\r\n    }\r\n}\r\n\r\nexport default FoodParty;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport '../CSS/Normalize.css';\r\nimport '../CSS/headerStyles.css';\r\nimport '../CSS/infoBarStyles.css'\r\nimport '../CSS/basicStyles.css';\r\nimport '../CSS/footerStyles.css';\r\nimport '../CSS/restaurantStyles.css';\r\nimport '../CSS/ModalsStyles.css'\r\nimport '../media/FlatIcon/font/flaticon.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Header from \"../components/Header\";\r\nimport Footer from \"../components/Footer\";\r\nimport InfoBar from \"./InfoBar\";\r\nimport Cart from \"./Cart\";\r\nimport Authentication from \"./Authentication\"\r\n\r\nString.prototype.toPersianDigits= function(){\r\n    var id = ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];\r\n    return this.replace(/[0-9]/g, function(w){\r\n        return id[+w]\r\n    });\r\n}\r\n\r\nclass Restaurant extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.fetchRestaurant = this.fetchRestaurant.bind(this);\r\n        this.showFoods = this.showFoods.bind(this);\r\n        this.createRestaurantMenu = this.createRestaurantMenu.bind(this);\r\n        this.showFood = this.showFood.bind(this);\r\n        this.handleModal = this.handleModal.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.showFoodModal = this.showFoodModal.bind(this);\r\n        this.hideFoodModal = this.hideFoodModal.bind(this);\r\n        this.increaseOrderCount = this.increaseOrderCount.bind(this);\r\n        this.decreaseOrderCount = this.decreaseOrderCount.bind(this);\r\n        this.renderModal = this.renderModal.bind(this);\r\n        this.state = {\r\n            restaurant : \"\",\r\n            foods :[],\r\n            cart : \"\",\r\n            clicked : false,\r\n            orderCount : 0,\r\n            ready : false,\r\n        };\r\n    }\r\n\r\n    fetchRestaurant(){\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Authorization': jwtStr\r\n            })\r\n        }\r\n        fetch(`http://ie.etuts.ir:31807/Loghme/restaurants/`+ this.props.id, requestOptions)\r\n        .then(response => {\r\n            const statusCode = response.status;\r\n            const data = response.json();\r\n            return Promise.all([statusCode, data]);\r\n        })\r\n        .then(([stat, data]) => {\r\n            if(stat===403){\r\n                localStorage.removeItem(\"JWT\")\r\n                localStorage.removeItem(\"expDate\")\r\n                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            if(stat===200){\r\n                var newRestaurant = data;\r\n                var newFoods = JSON.parse(JSON.stringify(newRestaurant.menu));\r\n                this.setState({\r\n                    restaurant: newRestaurant,\r\n                    foods: newFoods,\r\n                    ready: true,\r\n                });\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n    \r\n    componentDidMount() {\r\n        var now = new Date();\r\n        var expDate = new Date(localStorage.getItem(\"expDate\"));\r\n        if(now.getTime() >= expDate.getTime()) {\r\n            localStorage.removeItem(\"JWT\")\r\n            localStorage.removeItem(\"expDate\")\r\n            ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n        }\r\n        this.fetchRestaurant();\r\n        window.addEventListener(\"click\", this.hideFoodModal);\r\n    }\r\n\r\n    handleModal(event,props) {\r\n        event.preventDefault()\r\n        this.renderModal(props)\r\n    }\r\n\r\n    renderModal(props) {\r\n        const modalWindow = this.showFoodModal(props);\r\n        var modal = document.getElementById(\"restaurantModal\");\r\n        var content = document.getElementById(\"restaurantModal-content\");\r\n        content.classList.remove(\"zoomOut\");\r\n        content.classList.add(\"zoomIn\");\r\n        modal.style.display = \"block\";\r\n        ReactDOM.render(modalWindow, content);\r\n    }\r\n\r\n    increaseOrderCount(props) {\r\n        var newCount = this.state.orderCount + 1;\r\n        this.setState({\r\n            orderCount : newCount\r\n        }, () => this.renderModal(props));\r\n    }\r\n\r\n    decreaseOrderCount(props) {\r\n        var newCount = this.state.orderCount - 1;\r\n        if (this.state.orderCount > 0) {\r\n            this.setState({\r\n                orderCount : newCount\r\n            }, () => this.renderModal(props));\r\n        } else {\r\n            toast.error(\"The least possible choice!\")\r\n        }\r\n    }\r\n\r\n    handleSubmit(event, props){\r\n        event.preventDefault();\r\n        var toastId = toast.warn(\"Ordering your food...\");\r\n        if(this.state.orderCount === 0){\r\n            toast.dismiss(toastId)\r\n            toast.error(\"You must choose at least 1 food!\")\r\n            return\r\n        }\r\n        var params = {\r\n\t\t    \"id\" : this.state.restaurant.id,\r\n\t\t    \"name\" : props.name,\r\n            \"action\" : \"add\",\r\n            \"count\" : this.state.orderCount\r\n        };\r\n\t\tvar queryString = Object.keys(params).map(function(key) {\r\n    \t\treturn key + '=' + params[key]\r\n        }).join('&');\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n\t\tconst requestOptions = {\r\n\t        method: 'POST',\r\n\t        headers: new Headers({ \r\n\t        \t'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n                'Authorization': jwtStr\r\n\t        }),\r\n\t        body: queryString\r\n        };\r\n        fetch('http://ie.etuts.ir:31807/Loghme/users/cart', requestOptions)\r\n        .then((response) => {\r\n            this.setState(prevState => ({\r\n                orderCount : 0,\r\n            }))\r\n            this.renderModal(props)\r\n            if (response.ok) {\r\n                toast.dismiss(toastId)\r\n                toast.success(\"Food added to your cart successfully!\")\r\n            } else {\r\n                toast.dismiss(toastId)\r\n                if(response.status===403){\r\n                    if(JSON.stringify(response.json()) === \"BAD_JWT\") {\r\n                        localStorage.removeItem(\"JWT\")\r\n                        localStorage.removeItem(\"expDate\")\r\n                        ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n                    }\r\n                    toast.error(\"You chose your restaurant before!\")\r\n                }\r\n            }\r\n        })\r\n        .then(() => {\r\n            var modal = document.getElementById(\"restaurantModal\");\r\n            var content = document.getElementById(\"restaurantModal-content\");\r\n            content.classList.remove(\"zoomIn\");\r\n            content.classList.add(\"zoomOut\");\r\n            setTimeout(() =>{\r\n                modal.style.display = \"none\";\r\n            },200);\r\n        })\r\n        .catch(() =>\r\n            toast.error(\"Your order could not submitted completely!\")\r\n        )\r\n    }\r\n\r\n    showFoodModal(props) {\r\n        return (\r\n            <div className=\"foodMoreInfoContainer food-modal-content modal-content\">\r\n                <form onSubmit={(e) => this.handleSubmit(e, props)}>\r\n                    <div className=\"col-12 foodMoreInfo\">\r\n                        {this.state.restaurant.name}\r\n                    </div>\r\n                    <div className=\"row ml-0 mr-0 bottomDashedBorder\">\r\n                        <div className=\"col-4 pl-0 pr-1 mr-2\">\r\n                            <img className=\"foodBigLogo borderShadow\" src={props.image}/>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"row no-gutters\">\r\n                                <div className=\"col-auto foodBigName\">{props.name}</div>\r\n                                <div className=\"row ml-0 mr-0 justify-content-start\">\r\n                                <div className=\"starBigIcon text-right\">&#9733;</div>\r\n                                <div className=\"foodBigRate\">{String(5 * props.popularity).toPersianDigits()}</div>\r\n                                </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"row no-gutters\">\r\n                                <div className=\"foodDescription\">{props.description}</div>\r\n                            </div>\r\n                \r\n                            <div className=\"row no-gutters pt-3\">\r\n                                <div className=\"foodBigPrice pl-0 mr-0\">{String(props.price).toPersianDigits()} تومان</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row stockContainer-big ml-0 mr-0 text-center justify-content-around\">\r\n                        <div className=\"col-2 align-self-center\"></div>\r\n                        <div className=\"row col-2 pl-0 pr-0 foodCount-big justify-content-center align-self-center\">\r\n                            <a href=\"#\" onClick={() => this.increaseOrderCount(props)}>\r\n                                <i className=\"flaticon-loghme-big-plus\"></i>\r\n                            </a>\r\n                            <div className=\"mr-2 ml-2\">{String(this.state.orderCount).toPersianDigits()}</div>\r\n                            <a href=\"#\" onClick={() => this.decreaseOrderCount(props)}>\r\n                                <i className=\"flaticon-loghme-big-minus\"></i>\r\n                            </a>\r\n                        </div>\r\n                            <button className=\"col-4 buyFoodBigButton payBlueBG btn align-self-center\" type=\"submit\">اضافه&zwnj;کردن به سبد خرید</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    hideFoodModal(event) {\r\n        var modal = document.getElementById(\"restaurantModal\");\r\n        var content = document.getElementById(\"restaurantModal-content\");\r\n        if (event.target == modal || event.target == content) {\r\n            content.classList.remove(\"zoomIn\");\r\n            content.classList.add(\"zoomOut\");\r\n            setTimeout(() =>{\r\n                modal.style.display = \"none\";\r\n                this.setState({\r\n                    orderCount : 0\r\n                });\r\n            },200);\r\n        }\r\n    }\r\n    showFood(props){\r\n        var foodName = (props.food.name.length > 12) ? props.food.name.substring(0,12)+\"...\" : props.food.name;\r\n        return (\r\n            <div className=\"col-3 menuItem pl-0 pr-0 text-center borderShadow\">\r\n                <img className=\"foodLogo\" src={props.food.image}/>\r\n                <div className=\"row no-gutters text-center foodInfo justify-content-center\">\r\n                    <div className=\"col-auto foodName\">{foodName}</div>\r\n                    <div className=\"col-auto foodRate\">{String(5* props.food.popularity).toPersianDigits()}</div>\r\n                    <div className=\"col-auto starIcon text-right\">&#9733;</div>\r\n                </div>\r\n                <div className=\"price pl-0\">{String(props.food.price).toPersianDigits()} تومان</div>\r\n                <button id={props.food.name} className=\"addToCartButton btn rounded\" type=\"submit\" onClick={(e) => this.handleModal(e,props.food)}>افزودن به سبد خرید</button>\r\n            </div>\r\n        )\r\n    }\r\n    createRestaurantMenu = () => {\r\n        const rowsNum = Math.floor(this.state.foods.length / 3);\r\n        let menuTable = [];\r\n    \r\n        for (let i = 0; i < rowsNum; i++) {\r\n            let children = []\r\n\r\n            for (let j = 0; j < 3; j++) {\r\n                children.push(<this.showFood key={this.state.foods[i*3+j].name} food={this.state.foods[i*3+j]} />)\r\n            }\r\n            \r\n            menuTable.push(\r\n                <div className=\"row menuContents justify-content-end\">\r\n                    {children}\r\n                </div>\r\n            )\r\n        }\r\n        let children = []\r\n        for (let i = rowsNum*3; i < this.state.foods.length; i++) {\r\n            children.push(<this.showFood key={this.state.foods[i].name} food={this.state.foods[i]} />)\r\n        }\r\n        menuTable.push(\r\n            <div className=\"row menuContents justify-content-end\">\r\n                {children}\r\n            </div>\r\n        )\r\n\r\n        return menuTable    \r\n    }\r\n\r\n    showFoods(){\r\n        return(\r\n            <div className=\"col-8 menu dashedDivider justify-content-end\">\r\n                {this.createRestaurantMenu()}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"container-fluid loghmeContainer bg\">\r\n            <Header value = {\"restaurant\"}/>\r\n            <InfoBar type = {\"restaurant\"}/>\r\n            <ToastContainer/>\r\n            <div className =\"row justify-content-center\">\r\n            {this.state.ready?(\r\n                <img className =\"restaurantBigLogo borderShadow\" src={this.state.restaurant.logo}/>\r\n            ):(\r\n                <span className=\"spinner-grow spinner-grow-sm\"></span>\r\n            )}\r\n            </div>\r\n            <div className=\"row justify-content-center\">\r\n                <div className=\"restaurantBigName\">{this.state.restaurant.name}</div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-8 menuTextAlign justify-content-center\">\r\n\r\n                    <div className=\"row justify-content-center\">\r\n                        <div className=\"col-3 menuText menuUnderline pr-0 pl-0 text-center\">منوی غذا</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"row marginFromFooter\">\r\n                <this.showFoods/>\r\n                <div id=\"restaurantModal\" className=\"food-modal modal\">\r\n                    <div id=\"restaurantModal-content\" className=\"row animated faster zoomIn text-center\">\r\n                    </div>\r\n                </div>\r\n                <Cart/>\r\n            </div>\r\n            <Footer/>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nRestaurant.propTypes = {\r\n    id: PropTypes.string,\r\n};\r\n\r\nexport default Restaurant;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../../CSS/Normalize.css';\r\nimport '../../CSS/basicStyles.css';\r\nimport '../../CSS/infoBarStyles.css';\r\nimport '../../CSS/homePageStyles.css';\r\nimport '../../CSS/homeSearchBar.css';\r\nimport '../../CSS/ModalsStyles.css'\r\nimport '../../media/FlatIcon/font/flaticon.css';\r\nimport Restaurant from \"../Restaurant\";\r\nimport Spinner from \"../../components/Spinner\"\r\nimport Authentication from \"../Authentication\"\r\n\r\nclass HomeRestaurants extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.fetchRestaurants = this.fetchRestaurants.bind(this);\r\n        this.serachRestaurants = this.serachRestaurants.bind(this)\r\n        this.showRestaurants = this.showRestaurants.bind(this);\r\n        this.showRestaurant = this.showRestaurant.bind(this);\r\n        this.state = {\r\n            restaurants : [],\r\n            ready: false,\r\n        };\r\n    }\r\n\r\n    fetchRestaurants(){\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: new Headers({\r\n                'Authorization': jwtStr\r\n            })\r\n        }\r\n        fetch(`http://ie.etuts.ir:31807/Loghme/restaurants`, requestOptions)\r\n        .then(response => {\r\n            const statusCode = response.status;\r\n            const data = response.json();\r\n            return Promise.all([statusCode, data]);\r\n        })\r\n        .then(([stat, data]) => {\r\n            if(stat===403){\r\n                localStorage.removeItem(\"JWT\")\r\n                localStorage.removeItem(\"expDate\")\r\n                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            if(stat===200){\r\n                var updatedRestaurants = data;\r\n                this.setState({\r\n                    restaurants : updatedRestaurants,\r\n                    ready: true,\r\n                });\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    serachRestaurants(){\r\n        var params = {\r\n\t\t    \"food\" : this.props.foodQuery,\r\n            \"restaurant\" : this.props.restaurantQuery,\r\n        };\r\n\t\tvar queryString = Object.keys(params).map(function(key) {\r\n    \t\treturn key + '=' + params[key]\r\n        }).join('&');\r\n        var jwtStr = localStorage.getItem(\"JWT\") || ''\r\n\t\tconst requestOptions = {\r\n\t        method: 'POST',\r\n\t        headers: new Headers({ \r\n\t        \t'content-length' : queryString.length,\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\r\n                'Authorization': jwtStr\r\n            }),\r\n            body: queryString\r\n        };\r\n        fetch(`http://ie.etuts.ir:31807/Loghme/restaurants/search`, requestOptions)\r\n        .then(response => {\r\n            const statusCode = response.status;\r\n            const data = response.json();\r\n            return Promise.all([statusCode, data]);\r\n        })\r\n        .then(([stat, data]) => {\r\n            if(stat===403){\r\n                localStorage.removeItem(\"JWT\")\r\n                localStorage.removeItem(\"expDate\")\r\n                ReactDOM.render(<Authentication type={\"signup\"}/>, document.getElementById(\"root\"));\r\n            }\r\n            if(stat===200){\r\n                var updatedRestaurants = data;\r\n                this.setState({\r\n                    restaurants : updatedRestaurants,\r\n                    ready: true,\r\n                });\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.fetchRestaurants()\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.type === \"normal\" && prevProps.type === \"search\") {\r\n            this.fetchRestaurants()\r\n        } else if (this.props.type === \"search\" && prevProps.type === \"normal\") {\r\n            this.serachRestaurants();\r\n        } else if (this.props.type === \"search\" && prevProps.type === \"search\") {\r\n            if (this.props.foodQuery !== prevProps.foodQuery || this.props.restaurantQuery !== prevProps.restaurantQuery) {\r\n                this.serachRestaurants();\r\n            }\r\n        }\r\n      }\r\n\r\n    showRestaurant(props){\r\n        var restaurantName = (props.restaurant.name.length > 20) ? props.restaurant.name.substring(0,20)+\"...\" : props.restaurant.name;\r\n        return (\r\n            <div className=\"col-2 restaurantInfo pl-0 pr-0 text-center borderShadow\">\r\n                <img className=\"restaurantSmallLogo\" src={props.restaurant.logo}/>\r\n                <div className=\"row no-gutters justify-content-center\">\r\n                    <div className=\"col-auto restaurantSmallName pt-2 text-center\">{restaurantName}</div>\r\n                </div>\r\n                <form id={props.restaurant.id} onSubmit={(e) => {\r\n                    e.preventDefault()\r\n                    ReactDOM.render(<Restaurant id = {props.restaurant.id}/>, document.getElementById(\"root\"));\r\n                }}>\r\n                <button className=\"showMenuButton btn rounded\" type=\"submit\" >نمایش منو</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    createRestaurantsMenu = () => {\r\n        const rowsNum = Math.floor(this.state.restaurants.length / 4);\r\n        let restaurantsTable = [];\r\n    \r\n        for (let i = 0; i < rowsNum; i++) {\r\n            let children = []\r\n\r\n            for (let j = 0; j < 4; j++) {\r\n                children.push(<this.showRestaurant key={this.state.restaurants[i*4+j].id} restaurant={this.state.restaurants[i*4+j]} />)\r\n            }\r\n            \r\n            restaurantsTable.push(\r\n                <div className=\"row mb-3 justify-content-center\">\r\n                    {children}\r\n                </div>\r\n            )\r\n        }\r\n        \r\n        let children = []\r\n        for (let i = rowsNum*4; i < this.state.restaurants.length; i++) {\r\n            children.push(<this.showRestaurant key={this.state.restaurants[i].id} restaurant={this.state.restaurants[i]} />)\r\n        }\r\n        restaurantsTable.push(\r\n            <div className=\"row mb-3 justify-content-center\">\r\n                {children}\r\n            </div>\r\n        )\r\n\r\n        return restaurantsTable\r\n    }\r\n\r\n    showRestaurants(){\r\n        return(  \r\n            <div className=\"row marginFromFooter\">\r\n                <div className=\"col-12 restaurants justify-content-center\">\r\n                    {this.state.ready?(\r\n                        this.createRestaurantsMenu()\r\n                    ):(\r\n                        <Spinner/>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <div className=\"row mt-4 justify-content-center\">\r\n                    <div className=\"row col-12 justify-content-center\">\r\n                        <div className=\"col-2 titles titlesUnderline pr-0 pl-0 text-center\">رستوران&zwnj;ها</div>\r\n                    </div>\r\n                </div>\r\n                <this.showRestaurants />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default HomeRestaurants;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../../CSS/Normalize.css';\r\nimport '../../CSS/basicStyles.css';\r\nimport '../../CSS/infoBarStyles.css';\r\nimport '../../CSS/homePageStyles.css';\r\nimport '../../CSS/homeSearchBar.css';\r\nimport '../../CSS/ModalsStyles.css'\r\nimport '../../media/FlatIcon/font/flaticon.css';\r\nimport Header from \"../../components/Header\"\r\nimport Footer from \"../../components/Footer\"\r\nimport InfoBar from \"../InfoBar\";\r\nimport FoodParty from \"./FoodParty\";\r\nimport HomeRestaurants from \"./HomeRestaurants\";\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport Authentication from \"../Authentication\"\r\n\r\nclass Home extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.searchBar = this.searchBar.bind(this)\r\n        this.handleSearch = this.handleSearch.bind(this)\r\n        this.handleFoodChange = this.handleFoodChange.bind(this)\r\n        this.handleRestaurantChange = this.handleRestaurantChange.bind(this)\r\n        this.state = {\r\n            foodQuery : \"\",\r\n            restaurantQuery : \"\",\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        var now = new Date();\r\n        var expDate = new Date(localStorage.getItem(\"expDate\"));\r\n        if(now.getTime() >= expDate.getTime()) {\r\n            localStorage.removeItem(\"JWT\")\r\n            localStorage.removeItem(\"expDate\")\r\n            ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n        }\r\n    }\r\n    handleFoodChange(event){\r\n        event.persist();\r\n        this.setState(prevState => ({foodQuery : event.target.value}));\r\n    }\r\n    handleRestaurantChange(event){\r\n        event.persist();\r\n        this.setState(prevState => ({restaurantQuery : event.target.value}));\r\n    }\r\n    handleSearch(event){\r\n        event.preventDefault();\r\n        if (this.state.foodQuery === \"\" && this.state.restaurantQuery === \"\") {\r\n            toast.error(\"Please fill out at least one input box!\")\r\n        }\r\n        else {\r\n            ReactDOM.render(<Home type={\"search\"} foodValue={this.state.foodQuery} resValue={this.state.restaurantQuery}/>, document.getElementById(\"root\"));\r\n        }\r\n    }\r\n    searchBar(){\r\n        return(\r\n            <div className=\"row searchBarContents\">\r\n                <div className=\"col-12 justify-content-center\">\r\n                    <div className=\"row justify-content-center\">\r\n                        <img className=\"Loghme borderShadow\" src={require(\"../../media/Pics/LOGO.png\")} alt=\"logo\"/>\r\n                    </div>\r\n                    <div className=\"row LoghmeDescribe justify-content-center\">\r\n                        اولین و بزرگ&zwnj;ترین وب&zwnj;سایت سفارش آنلاین غذا در دانشگاه تهران\r\n                    </div>\r\n                    <form id=\"searchForm\" onSubmit={this.handleSearch}>\r\n                        <div className=\"row justify-content-center\">\r\n                            <div className=\"col-6 pl-0 pr-0 searchArea borderShadow rounded text-center\">\r\n                                <div className=\"row justify-content-center\">\r\n                                    <div className=\"col-4 pl-0 pr-0\">\r\n                                        <input type=\"text\" className=\"inputDesign text-center\" placeholder=\"نــــام غـــذا\" name=\"credit\"\r\n                                        onChange={this.handleFoodChange} />\r\n                                    </div>\r\n                                    <div className=\"col-4 pl-0 pr-0 text-center\">\r\n                                        <input type=\"text\" className=\"inputDesign text-center\" placeholder=\"نــــام رســــتـــوران\" name=\"credit\"\r\n                                        onChange={this.handleRestaurantChange} />\r\n                                    </div>\r\n                                    <div className=\"col-3 pr-0 pl-3 text-center\">\r\n                                        <button className=\"serachButton btn btn-block\" type=\"submit\">جســت&zwnj;و&zwnj;جـو</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"container-fluid loghmeContainer bg\">\r\n                { this.props.type === \"normal\" \r\n                ? <Header value = {\"home\"}/>\r\n                : <Header value = {\"restaurant\"}/>\r\n                }\r\n                <InfoBar type = {\"home\"}/>\r\n                <this.searchBar/>\r\n                <ToastContainer/>\r\n                { this.props.type === \"normal\" &&\r\n                    <FoodParty />\r\n                }\r\n                <HomeRestaurants type={this.props.type} foodQuery={this.props.foodValue} restaurantQuery={this.props.resValue}/>\r\n                <Footer />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Home from \"./containers/HomeContainers/Home\"\r\nimport Authentication from \"./containers/Authentication\"\r\n\r\nif (localStorage.getItem(\"JWT\") !== null) {\r\n    var now = new Date();\r\n    var expDate = new Date(localStorage.getItem(\"expDate\"));\r\n    if(now.getTime() <= expDate.getTime()) {\r\n        ReactDOM.render(<Home type={\"normal\"}/>, document.getElementById(\"root\"));\r\n    }\r\n    else {\r\n        ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n    }\r\n}\r\nelse {\r\n    ReactDOM.render(<Authentication type = {\"signup\"} />, document.getElementById(\"root\"));\r\n}"],"sourceRoot":""}